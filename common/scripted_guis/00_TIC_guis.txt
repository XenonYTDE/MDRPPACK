scripted_gui = {

	# The button to actually open up the UI
	open_the_TIC_scripted_gui = {
		context_type = player_context
		window_name = "TIC_open_the_main_window"

		dirty = global.TIC_dirty_update_var

		visible = {
			NOT = { has_global_flag = GAME_RULE_EU_disabled }
			is_ai = no
		}

		triggers = { TIC_open_the_gui_enabled = { is_ai = no } }

		effects = {
			TIC_open_the_gui_click = {
				set_country_flag = TIC_offices_tab_open
				if = { limit = { NOT = { has_country_flag = new_TIC_open  } }
					set_country_flag = new_TIC_open
				}
				else = {
					clr_country_flag = new_TIC_open
				}
				update_TIC_dirty_variable = yes
			}
		}
	}

	intercontinental_confederation_gui = {
		context_type = player_context
		window_name = "TIC_main_background_window"
		dirty = global.TIC_dirty_update_var

		visible = {
			NOT = { has_global_flag = GAME_RULE_EU_disabled }
			OR = {
				is_ai = yes
				has_country_flag = new_TIC_open
			}
		}

		# AI Triggering Section
		# ai_enabled = Allowed for the AI
		# ai_check = Ensures they are in the TIC before opening the GUI
		ai_enabled = { NOT = { has_global_flag = GAME_RULE_EU_disabled } }
		ai_check = {
			OR = {
				has_idea = pog_hegemony
				has_idea = superpower
				has_idea = great_power
				is_in_array = { global.TIC_member = THIS.id }
			}
		}
		# Test Interval
		ai_test_interval = 24
		ai_max_weight_taken_per_test = 1

		properties = {
			TIC_office_1_flag = { image = "[?global.TIC_office_1.GetFlag]" }
			TIC_office_2_flag = { image = "[?global.TIC_office_2.GetFlag]" }
			TIC_office_3_flag = { image = "[?global.TIC_office_3.GetFlag]" }
			TIC_office_4_flag = { image = "[?global.TIC_office_4.GetFlag]" }
			TIC_office_5_flag = { image = "[?global.TIC_office_5.GetFlag]" }
			TIC_office_6_flag = { image = "[?global.TIC_office_6.GetFlag]" }
			TIC_office_7_flag = { image = "[?global.TIC_office_7.GetFlag]" }
			TIC_office_8_flag = { image = "[?global.TIC_office_8.GetFlag]" }
			TIC_office_9_flag = { image = "[?global.TIC_office_9.GetFlag]" }
			TIC_office_10_flag = { image = "[?global.TIC_office_10.GetFlag]" }
			TIC_office_11_flag = { image = "[?global.TIC_office_11.GetFlag]" }
			TIC_office_12_flag = { image = "[?global.TIC_office_12.GetFlag]" }
			TIC_office_13_flag = { image = "[?global.TIC_office_13.GetFlag]" }
			TIC_office_14_flag = { image = "[?global.TIC_office_14.GetFlag]" }
			TIC_office_15_flag = { image = "[?global.TIC_office_15.GetFlag]" }
			TIC_office_16_flag = { image = "[?global.TIC_office_16.GetFlag]" }
		}

		triggers = {

			TIC_main_gui_bg_logo_visible = {
				NOT = {
					has_country_flag = TIC_offices_tab_open
					has_country_flag = TIC_info_tab_open
					has_country_flag = TIC_parliament_tab_open
					has_country_flag = TIC_council_tab_open
					has_country_flag = TIC_budget_tab_open
					has_country_flag = TIC_legislations_tab_open
				}
			}

		# Offices

			# Office 1
			TIC_office_1_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_1_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_1_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_1_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 2
			TIC_office_2_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_2_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_2_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_2_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 3
			TIC_office_3_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_3_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_3_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_3_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 4
			TIC_office_4_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_4_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_4_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_4_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 5
			TIC_office_5_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_5_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_5_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_5_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 6
			TIC_office_6_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_6_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_6_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_6_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 7
			TIC_office_7_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_7_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_7_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_7_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 8
			TIC_office_8_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_8_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_8_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_8_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 9
			TIC_office_9_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_9_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_9_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_9_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 10
			TIC_office_10_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_10_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_10_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_10_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 11
			TIC_office_11_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_11_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_11_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_11_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 12
			TIC_office_12_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_12_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_12_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_12_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 13
			TIC_office_13_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_13_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_13_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_13_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 14
			TIC_office_14_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_14_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_14_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_14_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 15
			TIC_office_15_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_15_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_15_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_15_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}
			# Office 16
			TIC_office_16_flag_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_16_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_16_text_visible = {
				TIC_offices_tab_open_trigger =  yes
			}
			TIC_office_16_click_enabled = {
				NOT = { has_country_flag = TIC_holding_office }
			}

		}

		effects = {

			TIC_close_button_click = {
				TIC_tab_selection = yes
				clr_country_flag = new_TIC_open
			}

			# Open Offices
			TIC_upper_button_1_click = {
				TIC_tab_selection = yes
				set_country_flag = TIC_offices_tab_open
			}
			# Open Info
			TIC_upper_button_2_click = {
				TIC_tab_selection = yes
				set_country_flag = TIC_info_tab_open
			}
			# Open Parliament
			TIC_upper_button_3_click = {
				TIC_tab_selection = yes
				set_country_flag = TIC_parliament_tab_open
			}
			# Open Council
			TIC_upper_button_4_click = {
				TIC_tab_selection = yes
				set_country_flag = TIC_council_tab_open
			}
			# Open Budget
			TIC_upper_button_5_click = {
				TIC_tab_selection = yes
				set_country_flag = TIC_budget_tab_open
			}
			# Open Legislations
			TIC_upper_button_6_click = {
				TIC_tab_selection = yes
				set_country_flag = TIC_legislations_tab_open
			}

			# Office Select Effects
			TIC_office_1_click = {
				add_timed_idea = {
					idea = TIC_office_1_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.101
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_2_click = {
				add_timed_idea = {
					idea = TIC_office_2_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.102
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_3_click = {
				add_timed_idea = {
					idea = TIC_office_3_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.103
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_4_click = {
				add_timed_idea = {
					idea = TIC_office_4_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.104
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_5_click = {
				add_timed_idea = {
					idea = TIC_office_5_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.105
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_6_click = {
				add_timed_idea = {
					idea = TIC_office_6_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.106
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_7_click = {
				add_timed_idea = {
					idea = TIC_office_7_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.107
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_8_click = {
				add_timed_idea = {
					idea = TIC_office_8_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.108
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_9_click = {
				add_timed_idea = {
					idea = TIC_office_9_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.109
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_10_click = {
				add_timed_idea = {
					idea = TIC_office_10_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.110
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_11_click = {
				add_timed_idea = {
					idea = TIC_office_11_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.111
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_12_click = {
				add_timed_idea = {
					idea = TIC_office_12_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.112
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_13_click = {
				add_timed_idea = {
					idea = TIC_office_13_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.113
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_14_click = {
				add_timed_idea = {
					idea = TIC_office_14_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.114
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_15_click = {
				add_timed_idea = {
					idea = TIC_office_15_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.115
				}
				update_TIC_dirty_variable = yes
			}
			TIC_office_16_click = {
				add_timed_idea = {
					idea = TIC_office_16_idea
					days = 1825
				}
				set_country_flag = TIC_holding_office
				for_each_scope_loop = {
					array = global.TIC_member
					news_event = TIC_news.116
				}
				update_TIC_dirty_variable = yes
			}
		}
	}
}
